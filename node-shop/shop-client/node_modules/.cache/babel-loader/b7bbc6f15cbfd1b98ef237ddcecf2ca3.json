{"remainingRequest":"/Users/mac/Documents/code/python/web/html/html5/node-shop/shop-client/node_modules/babel-loader/lib/index.js!/Users/mac/Documents/code/python/web/html/html5/node-shop/shop-client/src/http.js","dependencies":[{"path":"/Users/mac/Documents/code/python/web/html/html5/node-shop/shop-client/src/http.js","mtime":1589429934000},{"path":"/Users/mac/Documents/code/python/web/html/html5/node-shop/shop-client/node_modules/cache-loader/dist/cjs.js","mtime":1589361032000},{"path":"/Users/mac/Documents/code/python/web/html/html5/node-shop/shop-client/node_modules/babel-loader/lib/index.js","mtime":1589361031000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE1lc3NhZ2UsIExvYWRpbmcgfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7CnZhciBsb2FkaW5nOwoKdmFyIHN0YXJ0TG9hZGluZyA9IGZ1bmN0aW9uIHN0YXJ0TG9hZGluZygpIHsKICBsb2FkaW5nID0gTG9hZGluZy5zZXJ2aWNlKHsKICAgIGxvY2s6IHRydWUsCiAgICB0ZXh0OiAi5q2j5Zyo5Yqg6L295LitIiwKICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNSknCiAgfSk7Cn07Cgp2YXIgZW5kTG9hZGluZyA9IGZ1bmN0aW9uIGVuZExvYWRpbmcoKSB7CiAgbG9hZGluZy5jbG9zZSgpOwp9OyAvLyDor7fmsYLmi6bmiKoKCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIOWKoOi9veWKqOeUuwogIHN0YXJ0TG9hZGluZygpOwoKICBpZiAobG9jYWxTdG9yYWdlLmVsZVRva2VuKSB7CiAgICAvLyDorr7nva7nu5/kuIDnmoTor7fmsYJoZWFkZXIKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBsb2NhbFN0b3JhZ2UuZWxlVG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiqCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vICDnu5PmnZ/liqjnlLsKICBlbmRMb2FkaW5nKCk7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBlbmRMb2FkaW5nKCk7CiAgTWVzc2FnZS5lcnJvcihlcnJvci5yZXNwb25zZS5kYXRhKTsgLy8g6I635Y+W54q25oCB56CBCgogIHZhciBzdGF0dXMgPSBlcnJvci5yZXNwb25zZS5zdGF0dXM7CgogIGlmIChzdGF0dXMgPT0gNDAxKSB7CiAgICBNZXNzYWdlLmVycm9yKCJ0b2tlbuW3sue7j+WkseaViO+8jOivt+mHjeaWsOeZu+W9le+8gSIpOyAvLyDmuIXpmaR0b2tlbgoKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJlbGVUb2tlbiIpOyAvLyDot7PovazliLDnmbvlvZXpobXpnaIKCiAgICByb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgYXhpb3M7"},{"version":3,"sources":["/Users/mac/Documents/code/python/web/html/html5/node-shop/shop-client/src/http.js"],"names":["axios","Message","Loading","router","loading","startLoading","service","lock","text","background","endLoading","close","interceptors","request","use","config","localStorage","eleToken","headers","Authorization","error","Promise","reject","response","data","status","removeItem","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,YAAjC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAIC,OAAJ;;AAEA,IAAIC,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC3BD,EAAAA,OAAO,GAAGF,OAAO,CAACI,OAAR,CAAgB;AACtBC,IAAAA,IAAI,EAAE,IADgB;AAEtBC,IAAAA,IAAI,EAAE,OAFgB;AAGtBC,IAAAA,UAAU,EAAE;AAHU,GAAhB,CAAV;AAKH,CAND;;AASA,IAAIC,UAAU,GAAG,SAAbA,UAAa,GAAY;AACzBN,EAAAA,OAAO,CAACO,KAAR;AACH,CAFD,C,CAKA;;;AACAX,KAAK,CAACY,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrC;AACAV,EAAAA,YAAY;;AAEZ,MAAIW,YAAY,CAACC,QAAjB,EAA2B;AACvB;AACAF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+BH,YAAY,CAACC,QAA5C;AACH;;AAED,SAAOF,MAAP;AACH,CAVD,EAUG,UAACK,KAAD,EAAW;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAZD,E,CAeA;;AACApB,KAAK,CAACY,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CAAgC,UAAAS,QAAQ,EAAI;AACxC;AACAb,EAAAA,UAAU;AACV,SAAOa,QAAP;AACH,CAJD,EAIG,UAACH,KAAD,EAAW;AACVV,EAAAA,UAAU;AACVT,EAAAA,OAAO,CAACmB,KAAR,CAAcA,KAAK,CAACG,QAAN,CAAeC,IAA7B,EAFU,CAIV;;AAJU,MAKFC,MALE,GAKSL,KAAK,CAACG,QALf,CAKFE,MALE;;AAMV,MAAIA,MAAM,IAAI,GAAd,EAAmB;AACfxB,IAAAA,OAAO,CAACmB,KAAR,CAAc,kBAAd,EADe,CAEf;;AACAJ,IAAAA,YAAY,CAACU,UAAb,CAAwB,UAAxB,EAHe,CAIf;;AACAvB,IAAAA,MAAM,CAACwB,IAAP,CAAY,QAAZ;AACH;;AACD,SAAON,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAlBD;AAqBA,eAAepB,KAAf","sourcesContent":["import axios from \"axios\";\nimport { Message, Loading } from \"element-ui\";\nimport router from './router';\n\nlet loading;\n\nvar startLoading = function () {\n    loading = Loading.service({\n        lock: true,\n        text: \"正在加载中\",\n        background: 'rgba(0, 0, 0, 0.5)'\n    });\n}\n\n\nvar endLoading = function () {\n    loading.close();\n}\n\n\n// 请求拦截\naxios.interceptors.request.use(config => {\n    // 加载动画\n    startLoading();\n\n    if (localStorage.eleToken) {\n        // 设置统一的请求header\n        config.headers.Authorization = localStorage.eleToken;\n    }\n\n    return config;\n}, (error) => {\n    return Promise.reject(error);\n});\n\n\n// 响应拦截\naxios.interceptors.response.use(response => {\n    //  结束动画\n    endLoading();\n    return response;\n}, (error) => {\n    endLoading();\n    Message.error(error.response.data);\n\n    // 获取状态码\n    const { status } = error.response;\n    if (status == 401) {\n        Message.error(\"token已经失效，请重新登录！\");\n        // 清除token\n        localStorage.removeItem(\"eleToken\");\n        // 跳转到登录页面\n        router.push(\"/login\");\n    }\n    return Promise.reject(error);\n})\n\n\nexport default axios;\n"]}]}